<mat-toolbar style="background-color: #43A047;">
  <h1 class="h1 text-left" style="color: white;">
    BioDiv-LLN
  </h1>
</mat-toolbar>

<mat-toolbar>
  <span>Connexion</span>
</mat-toolbar>

<mat-card class="connexion-card">
  <mat-card-content>
    <div class="connexion-form">
    <form [formGroup]="loginForm" (ngSubmit)="connect()">

      <mat-form-field class="field" appearance="outline">
        <mat-label>
          Nom d'utilisateur
        </mat-label>
        <input matInput type="text" formControlName="username" [ngClass]="{ 'is-invalid': submitted && f.username.errors }">
        <div *ngIf="submitted && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">Nom d'utilisateur requis.</div>
        </div>
      </mat-form-field>


      <mat-form-field class="field" appearance="outline">
        <mat-label>
          Mot de passe
        </mat-label>
        <input matInput [type]="hide ? 'text' : 'password'" formControlName="password" [ngClass]="{ 'is-invalid': submitted && f.password.errors }" >
        <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility' : 'visibility_off'}}</mat-icon>
        <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
          <div *ngIf="f.password.errors.required">Mot de passe requis.</div>
        </div>
        </mat-form-field>

      <mat-card-actions>
        <button mat-raised-button type="submit" [disabled]="loading" style="background-color: #4CAF50; color: white;">
          <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1" style="color: white;"></span>
          Connexion
        </button>
        <button mat-raised-button type="button" routerLink="/newAccount" style="color: black;">Créer un compte</button>
      </mat-card-actions>

    </form>

    </div>

    <app-alert></app-alert>

    <div *ngIf="this.loginService.currentUserValue">
      <h1 class="h1 text-center">
        Vous êtes déjà connecté.
      </h1>
      <button mat-raised-button routerLink="/">Retour</button>
    </div>

  </mat-card-content>
</mat-card>
